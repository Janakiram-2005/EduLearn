<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chemistry Hub - Acids, Bases & Salts</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* --- CORE TEMPLATE & GLOBAL STYLES (Light Theme) --- */
        :root {
            --header-bg: #ffffff;
            --page-bg: #f4f7f9;
            --panel-bg: #ffffff;
            --border-color: #e0e0e0;
            --text-dark: #1e293b;
            --text-light: #475569;
            --accent-cyan: #0891b2;
            --accent-green: #22c55e;
            --accent-red: #ef4444;
            --accent-yellow: #f59e0b;
            --primary-blue: #007bff;
            --secondary-gray: #6c757d;
        }
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--page-bg);
            color: var(--text-dark);
            margin: 0;
            height: 100vh;
            overflow: hidden;
        }
        .page-container { display: flex; flex-direction: column; height: 100vh; }
        .header {
            position: fixed; top: 0; left: 0; width: 100%; height: 60px;
            background-color: var(--header-bg);
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 24px;
            border-bottom: 1px solid var(--border-color);
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            z-index: 1000;
            box-sizing: border-box;
        }
        .header-section { flex: 1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .header-section.center { text-align: center; font-size: 1.2em; font-weight: bold; }
        .header-section.right { display: flex; justify-content: flex-end; }
        .button {
            padding: 8px 16px; margin-left: 10px; cursor: pointer;
            border: none; border-radius: 6px; font-weight: 600; color: white;
            transition: transform 0.1s;
        }
        .button:active { transform: scale(0.95); }
        .main-content {
            margin-top: 60px; padding: 24px; display: flex;
            flex-grow: 1; overflow: hidden; box-sizing: border-box;
            gap: 24px; justify-content: center;
        }
        .panel {
            background-color: var(--panel-bg);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            border: 1px solid var(--border-color);
            box-sizing: border-box;
            overflow-y: auto; padding: 24px 32px;
            height: calc(100vh - 108px);
        }
        #info-panel { flex-shrink: 0; transition: width 400ms ease-in-out, margin 400ms ease-in-out; }
        #activity-panel { display: none; flex-grow: 1; padding: 0; flex-direction: column; }
        .main-content.activity-visible { justify-content: flex-start; }
        .main-content.activity-visible #info-panel { width: 340px; min-width: 340px; }
        .main-content.activity-visible #activity-panel { display: flex; }

        /* --- ACTIVITY-SPECIFIC STYLES --- */
        .activity-area { flex-grow: 1; position: relative; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 0.75rem; padding: 1.5rem; }
        .bottom-control-bar { height: 60px; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; background-color: var(--page-bg); border-top: 1px solid var(--border-color); flex-shrink: 0; }
        .status-bar { font-weight: bold; color: var(--text-dark); }
        .reset-button { padding: 8px 16px; cursor: pointer; background-color: var(--accent-red); color: white; border: none; border-radius: 6px; font-weight: 600; }
        .game-header { display: flex; justify-content: space-between; align-items: center; width: 100%; max-width: 600px; margin: 0 auto 1rem; }
        .feedback { min-height: 30px; margin-top: 1rem; font-weight: 600; font-size: 1.1rem; text-align: center;}
        .correct { color: var(--accent-green); }
        .incorrect { color: var(--accent-red); }
        .shake { animation: shake 0.5s ease-in-out; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 20%, 60% { transform: translateX(-8px); } 40%, 80% { transform: translateX(8px); } }

        /* Game 1: pH Tester */
        .ph-scale-container { background: #f1f5f9; padding: 1rem; border-radius: 12px; margin: 1rem 0; width:100%; max-width: 500px; }
        .ph-scale { display: flex; height: 40px; border-radius: 8px; overflow: hidden; position: relative; }
        .ph-zone { flex: 1; display: flex; align-items: center; justify-content: center; font-weight: 600; color: white;}
        .ph-acid { background: linear-gradient(90deg, #ef4444, #f59e0b); }
        .ph-neutral { background: var(--accent-green); }
        .ph-base { background: linear-gradient(90deg, #3b82f6, #8b5cf6); }
        #ph-indicator { position: absolute; top: -5px; bottom: -5px; width: 6px; background: white; border-radius: 3px; box-shadow: 0 0 10px white; transition: left 1s ease-in-out; left: 50%; }
        .ph-options { display: flex; gap: 1rem; justify-content: center; margin-top: 1.5rem; }
        .ph-option-btn { font-size: 1.1rem; font-weight: 600; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; border: 2px solid var(--border-color); background-color: var(--panel-bg); }
        .ph-option-btn:disabled { cursor: not-allowed; opacity: 0.7; }
        .ph-option-btn.correct { background-color: var(--accent-green); color: white; }
        .ph-option-btn.incorrect { background-color: var(--accent-red); color: white; }

        /* Game 2: Litmus Test */
        .litmus-lab-area { display: flex; align-items: flex-end; justify-content: center; gap: 3rem; width: 100%; margin: 1rem 0; }
        .litmus-strips { display: flex; flex-direction: column; gap: 1rem; }
        .litmus-strip { width: 40px; height: 150px; border: 2px solid var(--text-dark); border-radius: 8px; cursor: grab; transition: background-color 0.5s; }
        .litmus-strip:active { cursor: grabbing; }
        #red-strip { background-color: #f87171; }
        #blue-strip { background-color: #60a5fa; }
        .beaker { width: 150px; height: 200px; border: 5px solid #9ca3af; border-top: none; border-radius: 0 0 20px 20px; position: relative; background: rgba(100, 116, 139, 0.2); }
        .beaker-liquid { width: 100%; height: 60%; background: var(--primary-blue); position: absolute; bottom: 0; border-radius: 0 0 15px 15px; }
        .beaker.drag-over { border-color: var(--accent-yellow); }
        
        /* Game 3: Neutralization Battle */
        .reactant-pool { display: flex; justify-content: center; flex-wrap: wrap; gap: 15px; background: #e2e8f0; padding: 15px; border-radius: 12px; margin-top: 1rem; }
        .reactant { padding: 10px 20px; background: var(--panel-bg); border: 1px solid var(--border-color); border-radius: 8px; font-weight: 600; cursor: grab; user-select: none; }
        .reaction-zone { width: 100%; min-height: 100px; background: #f1f5f9; border: 3px dashed #cbd5e1; border-radius: 15px; display: flex; justify-content: center; align-items: center; padding: 20px; transition: border-color 0.3s; flex-wrap: wrap; gap: 10px; }
        .reaction-zone.drag-over { border-color: var(--accent-cyan); }
        .product-display { margin-top: 20px; min-height: 50px; font-size: 1.2rem; font-weight: 600; color: var(--accent-green); }
        .bubble { position: absolute; width: 10px; height: 10px; background: white; border-radius: 50%; animation: bubble-rise 2s infinite; }
        @keyframes bubble-rise { from { bottom: 0; opacity: 1; } to { bottom: 100px; opacity: 0; } }

        /* Modal */
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.6); justify-content: center; align-items: center; }
        .modal.active { display: flex; }
        .modal-content { background: var(--panel-bg); padding: 40px 50px; border-radius: 20px; text-align: center; box-shadow: 0 10px 40px rgba(0,0,0,0.2); position: relative; }
    </style>
</head>
<body class="page-container">
    
    <header class="header">
        <div class="header-section">Class 6 - Chemistry</div>
        <div id="header-title" class="header-section center">Information</div>
        <div class="header-section right">
            <button id="back-btn" class="button" style="background-color: var(--secondary-gray);">Back</button>
            <button id="toggle-view-btn" class="button" style="background-color: var(--primary-blue);">Activity</button>
            <button id="difficulty-btn" class="button" style="background-color: var(--accent-cyan);">Difficulty: Easy</button>
        </div>
    </header>

    <main class="main-content" id="main-content">
        <section id="info-panel" class="panel">
            <h1 class="text-3xl font-bold mb-4" style="color: var(--accent-cyan);">Acids, Bases & Salts</h1>
            <div style="display:flex; flex-direction:column; gap:1.5rem;">
                <div>
                    <h2 class="text-xl font-semibold">What are Acids & Bases? ‚öóÔ∏è</h2>
                    <p class="mt-2 text-gray-600">Acids and bases are two special kinds of chemicals. We can tell them apart by their properties. Acids often taste sour, while bases can feel slippery. We use the <b>pH scale</b> to measure how acidic or basic a substance is.</p>
                </div>
                <div>
                    <h2 class="text-xl font-semibold">The pH Scale</h2>
                    <p class="mt-2 text-gray-600">The pH scale goes from 0 to 14:</p>
                    <ul class="list-disc list-inside mt-2 space-y-2 text-gray-600">
                        <li>Substances with a pH from <b>0 to 6</b> are <b>Acids</b> (e.g., Lemon Juice).</li>
                        <li>A substance with a pH of <b>7</b> is <b>Neutral</b> (e.g., Pure Water).</li>
                        <li>Substances with a pH from <b>8 to 14</b> are <b>Bases</b> (e.g., Soap).</li>
                    </ul>
                </div>
                <div>
                    <h2 class="text-xl font-semibold">How to Play the Games</h2>
                     <ul class="list-disc list-inside mt-2 text-gray-600">
                        <li><b>Easy (pH Tester):</b> Guess if a substance is an Acid, Base, or Neutral.</li>
                        <li><b>Medium (Litmus Test):</b> Drag litmus paper into the solution to see the color change.</li>
                        <li><b>Hard (Neutralization):</b> Drag an acid and a base into the beaker to create salt and water.</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="activity-panel" class="panel">
            <div class="activity-area" id="activity-area"></div>
            <footer class="bottom-control-bar">
                <div id="status-bar" class="status-bar">Good luck, scientist!</div>
                <button id="reset-btn" class="reset-button">Reset</button>
            </footer>
        </section>
    </main>

    <div class="modal" id="end-game-modal">
        <div class="modal-content"><h2 id="modal-title"></h2><p id="modal-score"></p><button class="button" id="modal-close-btn" style="background-color: var(--primary-blue);">Play Again</button></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            const difficulties = ['Easy', 'Medium', 'Hard'];
            let showActivity = false, difficultyIdx = 0;

            const mainContent = document.getElementById('main-content');
            const infoPanel = document.getElementById('info-panel');
            const activityArea = document.getElementById('activity-area');
            const headerTitle = document.getElementById('header-title');
            const toggleViewBtn = document.getElementById('toggle-view-btn');
            const difficultyBtn = document.getElementById('difficulty-btn');
            const backBtn = document.getElementById('back-btn');
            const resetBtn = document.getElementById('reset-btn');
            const modal = document.getElementById('end-game-modal');
            const modalCloseBtn = document.getElementById('modal-close-btn');

            function updateLayout() {
                if (showActivity) mainContent.classList.add('activity-visible');
                else mainContent.classList.remove('activity-visible');
                infoPanel.style.width = showActivity ? '340px' : `${Math.min(700, window.innerWidth - 48)}px`;
                headerTitle.textContent = showActivity ? `Activity (${difficulties[difficultyIdx]})` : 'Information';
                toggleViewBtn.textContent = showActivity ? 'Information' : 'Activity';
            }

            function startGame() {
                const difficulty = difficulties[difficultyIdx];
                if (difficulty === 'Easy') initPhGame();
                else if (difficulty === 'Medium') initLitmusGame();
                else if (difficulty === 'Hard') initNeutralizationGame();
            }
            
            function showEndModal(title, scoreText) {
                document.getElementById('modal-title').textContent = title;
                document.getElementById('modal-score').textContent = scoreText;
                modal.classList.add('active');
            }
            
            let initPhGame = () => {}, initLitmusGame = () => {}, initNeutralizationGame = () => {};

            // --- Game 1: pH Tester (Easy) ---
            (() => {
                const allLiquids = [{ n: "Lemon Juice", t: "Acid", p: 2, h: "It has a pH of 2." }, { n: "Vinegar", t: "Acid", p: 3, h: "It has a pH of 3." }, { n: "Soap Water", t: "Base", p: 12, h: "It has a pH of 12." }, { n: "Baking Soda", t: "Base", p: 9, h: "It has a pH of 9." }, { n: "Pure Water", t: "Neutral", p: 7, h: "It has a pH of 7." }, { n: "Salt Solution", t: "Neutral", p: 7, h: "It has a pH of 7." }, { n: "Milk", t: "Acid", p: 6, h: "It has a pH of 6." }, { n: "Coffee", t: "Acid", p: 5, h: "It has a pH of 5." }, { n: "Bleach", t: "Base", p: 13, h: "It has a pH of 13." }, { n: "Ammonia", t: "Base", p: 11, h: "It has a pH of 11." }];
                let phScore, currentLiquids;

                initPhGame = () => {
                    phScore = 0;
                    currentLiquids = [...allLiquids].sort(() => 0.5 - Math.random()).slice(0, 5);
                    loadPhQuestion(0);
                };

                function loadPhQuestion(level) {
                    if (level >= currentLiquids.length) {
                        showEndModal("pH Master! üå°Ô∏è", `Final Score: ${phScore}`);
                        return;
                    }
                    const liquid = currentLiquids[level];
                    activityArea.innerHTML = `
                        <div class="game-header"><h2>pH Tester</h2><div class="stat-display">Score: <span>${phScore}</span></div></div>
                        <p style="font-size: 1.5rem; font-weight: 600;">Testing: ${liquid.n}</p>
                        <div class="ph-scale-container"><div class="ph-scale"><div class="ph-zone ph-acid">Acid</div><div class="ph-zone ph-neutral">7</div><div class="ph-zone ph-base">Base</div><div id="ph-indicator"></div></div></div>
                        <div class="ph-options"><button class="ph-option-btn" data-type="Acid">Acid</button><button class="ph-option-btn" data-type="Neutral">Neutral</button><button class="ph-option-btn" data-type="Base">Base</button></div>
                        <p class="feedback" id="ph-feedback"></p>`;
                    activityArea.querySelectorAll('.ph-option-btn').forEach(btn => btn.addEventListener('click', (e) => handlePhChoice(e, level)));
                }

                function handlePhChoice(e, level) {
                    const choice = e.target.dataset.type;
                    const correct = currentLiquids[level];
                    activityArea.querySelectorAll('.ph-option-btn').forEach(btn => btn.disabled = true);

                    document.getElementById('ph-indicator').style.left = `${(correct.p / 14) * 100}%`;
                    const feedbackEl = document.getElementById('ph-feedback');

                    if (choice === correct.t) {
                        phScore += 10;
                        feedbackEl.textContent = "Correct! ‚úÖ";
                        feedbackEl.className = "feedback correct";
                        e.target.classList.add('correct');
                    } else {
                        feedbackEl.textContent = `Incorrect. ${correct.h} It's an ${correct.t}.`;
                        feedbackEl.className = "feedback incorrect";
                        e.target.classList.add('incorrect');
                    }
                    activityArea.querySelector('.stat-display span').textContent = phScore;
                    setTimeout(() => loadPhQuestion(level + 1), 2500);
                }
            })();

            // --- Game 2: Litmus Test (Medium) ---
            (() => {
                const allLitmusLiquids = [{ name: "Vinegar", type: "Acid" }, { name: "Soap Water", type: "Base" }, { name: "Salt Solution", type: "Neutral" }, { name: "Lemon Juice", type: "Acid" }, { name: "Ammonia", type: "Base" }];
                let currentLitmusLiquids, litmusLevel, completedTests;

                initLitmusGame = () => {
                    currentLitmusLiquids = [...allLitmusLiquids].sort(() => 0.5 - Math.random()).slice(0, 3);
                    litmusLevel = 0;
                    loadLitmusProblem();
                };
                
                function loadLitmusProblem() {
                    if (litmusLevel >= currentLitmusLiquids.length) {
                        showEndModal("Litmus Expert! üß™", "You've completed all the tests!");
                        return;
                    }
                    completedTests = new Set();
                    const liquid = currentLitmusLiquids[litmusLevel];
                    activityArea.innerHTML = `
                        <div class="game-header"><h2>Litmus Test Simulator</h2><button id="next-btn" class="button" style="background-color:var(--secondary-gray); visibility: hidden;">Next Liquid</button></div>
                        <h3 style="font-size: 1.5rem; font-weight: 600;">Testing: ${liquid.name}</h3>
                        <p>Drag a strip to the liquid to test it!</p>
                        <div class="litmus-lab-area">
                            <div class="litmus-strips">
                                <div id="red-strip" class="litmus-strip" draggable="true" data-color="red"></div>
                                <div id="blue-strip" class="litmus-strip" draggable="true" data-color="blue"></div>
                            </div>
                            <div class="beaker" id="litmus-beaker"><div class="beaker-liquid"></div></div>
                        </div>
                        <p class="feedback" id="litmus-feedback"></p>`;
                    
                    const beaker = document.getElementById('litmus-beaker');
                    beaker.addEventListener('dragover', e => { e.preventDefault(); beaker.classList.add('drag-over'); });
                    beaker.addEventListener('dragleave', () => beaker.classList.remove('drag-over'));
                    beaker.addEventListener('drop', handleLitmusDrop);
                    document.getElementById('red-strip').addEventListener('dragstart', e => e.dataTransfer.setData('text/strip', 'red'));
                    document.getElementById('blue-strip').addEventListener('dragstart', e => e.dataTransfer.setData('text/strip', 'blue'));
                    document.getElementById('next-btn').addEventListener('click', () => { litmusLevel++; loadLitmusProblem(); });
                }

                function handleLitmusDrop(e) {
                    const stripColor = e.dataTransfer.getData('text/strip');
                    if (completedTests.has(stripColor)) return;

                    const type = currentLitmusLiquids[litmusLevel].type;
                    const feedbackEl = document.getElementById('litmus-feedback');
                    
                    if (type === 'Acid') {
                        if (stripColor === 'blue') document.getElementById('blue-strip').style.backgroundColor = '#f87171'; // Blue turns Red
                        feedbackEl.textContent = "Blue litmus turned red. It's an Acid!";
                    } else if (type === 'Base') {
                        if (stripColor === 'red') document.getElementById('red-strip').style.backgroundColor = '#60a5fa'; // Red turns Blue
                        feedbackEl.textContent = "Red litmus turned blue. It's a Base!";
                    } else { // Neutral
                        feedbackEl.textContent = "No color change. It's Neutral!";
                    }
                    
                    completedTests.add(stripColor);
                    feedbackEl.className = 'feedback correct';

                    if(completedTests.size === 2) {
                        document.getElementById('next-btn').style.visibility = 'visible';
                    }
                }
            })();

            // --- Game 3: Neutralization Battle (Hard) ---
            (() => {
                const allReactants = ["HCl (Acid)", "Vinegar (Acid)", "NaOH (Base)", "Baking Soda (Base)", "H‚ÇÇSO‚ÇÑ (Acid)", "KOH (Base)"];
                const reactions = { "HCl (Acid),NaOH (Base)": "NaCl (Salt) + H‚ÇÇO", "Baking Soda (Base),Vinegar (Acid)": "CO‚ÇÇ Gas + H‚ÇÇO", "H‚ÇÇSO‚ÇÑ (Acid),KOH (Base)": "K‚ÇÇSO‚ÇÑ (Salt) + H‚ÇÇO" };
                let reactantsInZone, currentReactionTarget;

                initNeutralizationGame = () => {
                    const challengeKeys = Object.keys(reactions);
                    currentReactionTarget = challengeKeys[Math.floor(Math.random() * challengeKeys.length)];
                    loadNeutralizationProblem();
                };
                
                function loadNeutralizationProblem() {
                    reactantsInZone = new Set();
                    activityArea.innerHTML = `
                        <div class="game-header"><h2>Neutralization Battle</h2></div>
                        <h3 style="font-size: 1.2rem;">Your Mission: Create the reactants for <b style="color: var(--accent-cyan);">${reactions[currentReactionTarget]}</b></h3>
                        <div class="reaction-zone" id="reaction-zone">Drag Reactants Here</div>
                        <div class="reactant-pool" id="reactant-pool"></div>
                        <p class="feedback" id="product-display"></p>`;
                    
                    const reactantPool = document.getElementById('reactant-pool');
                    [...allReactants].sort(() => 0.5 - Math.random()).forEach(r => {
                        const el = document.createElement('div'); el.className = 'reactant'; el.textContent = r; el.draggable = true;
                        el.addEventListener('dragstart', e => e.dataTransfer.setData('text/reactant', r));
                        reactantPool.appendChild(el);
                    });
                    
                    document.getElementById('reaction-zone').addEventListener('dragover', e => { e.preventDefault(); e.currentTarget.classList.add('drag-over'); });
                    document.getElementById('reaction-zone').addEventListener('dragleave', e => e.currentTarget.classList.remove('drag-over'));
                    document.getElementById('reaction-zone').addEventListener('drop', handleNeutralizationDrop);
                }

                function handleNeutralizationDrop(e) {
                    const zone = e.currentTarget;
                    zone.classList.remove('drag-over');
                    const reactant = e.dataTransfer.getData('text/reactant');
                    if (reactantsInZone.has(reactant) || reactantsInZone.size >= 2) return;
                    
                    reactantsInZone.add(reactant);
                    
                    if (reactantsInZone.size === 1) zone.innerHTML = '';
                    const el = document.createElement('div'); el.className = 'reactant'; el.textContent = reactant; zone.appendChild(el);

                    if (reactantsInZone.size === 2) {
                        const sorted = [...reactantsInZone].sort().join(',');
                        const feedbackEl = document.getElementById('product-display');
                        if (sorted === currentReactionTarget) {
                            feedbackEl.textContent = `Success! You made ${reactions[sorted]}!`;
                            feedbackEl.className = 'feedback correct';
                            zone.classList.add('shake');
                            setTimeout(() => showEndModal("Reaction Master!", "You successfully created the target compound!"), 1500);
                        } else {
                            feedbackEl.textContent = 'Incorrect reactants. Try again!';
                            feedbackEl.className = 'feedback incorrect';
                            zone.classList.add('shake');
                            setTimeout(() => {
                                reactantsInZone.clear();
                                zone.innerHTML = 'Drag Reactants Here';
                                feedbackEl.textContent = '';
                            }, 2000);
                        }
                    }
                }
            })();
            
            // --- Main Event Listeners ---
            backBtn.addEventListener('click', () => { window.history.back(); });
            toggleViewBtn.addEventListener('click', () => {
                showActivity = !showActivity;
                if (showActivity) startGame();
                updateLayout();
            });
            difficultyBtn.addEventListener('click', () => {
                difficultyIdx = (difficultyIdx + 1) % difficulties.length;
                const newDifficulty = difficulties[difficultyIdx];
                difficultyBtn.textContent = `Difficulty: ${newDifficulty}`;
                if (showActivity) startGame();
            });
            resetBtn.addEventListener('click', startGame);
            modalCloseBtn.addEventListener('click', () => {
                modal.classList.remove('active');
                startGame();
            });
            
            updateLayout();
        });
    </script>
</body>
</html>